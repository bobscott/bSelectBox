(function($,window,document,undefined){var pluginName="bSelectBox",defaults={mainClass:"bSelectBox",customClass:"",openClass:"open",selectedClass:"optionSelected",setWidth:true,before:function(){},after:function(){}};function Plugin(element,options){this.element=element;this.options=$.extend({},defaults,options);this._defaults=defaults;this._name=pluginName;this.trim=function(str){return str.replace(/^\s\s*/,'').replace(/\s\s*$/,'');}
this.init();}
Plugin.prototype={init:function(){var options=this.options,element=this.element,classes=this.trim(options.mainClass+' '+options.customClass),$selectMarkup=$('<div class="'+classes+'"><div class="selectBox"><p data-value=""></p><span></span></div></div>'),currentValue=$(element).val();value='',text='',optionList='',optionWidth=0,$optionMarkup=$('<div class="selectOptions"><ol></ol></div>');options.before();$('option',element).each(function(){value=$(this).val();text=$(this).text();optionList+='<li><span data-value="'+value+'">'+text+'</span></li>';});$('ol',$optionMarkup).append(optionList);$('.selectBox',$selectMarkup).after($optionMarkup);$(element).after($selectMarkup);if(options.setWidth){$selectMarkup.addClass(options.openClass);optionWidth=$('.selectOptions',$selectMarkup).width()-$('.selectBox',$selectMarkup).css('padding-left').split('px')[0]-$('.selectBox',$selectMarkup).css('padding-right').split('px')[0];$selectMarkup.removeClass(options.openClass);$('.selectBox',$selectMarkup).width(optionWidth);}
$(element).hide();$('.selectBox',$selectMarkup).click(function(e){e.stopPropagation();$(this).parent().toggleClass(options.openClass);});$('.selectOptions span',$selectMarkup).click(function(e){e.stopPropagation();var value=$(this).attr('data-value'),text=$(this).text();$('p',$selectMarkup).text(text).attr('data-value',value);$(element).val(value);$(this).closest('.'+options.mainClass+'.open').removeClass(options.openClass);$('.'+options.selectedClass,$selectMarkup).removeClass(options.selectedClass);$(this).parent().addClass(options.selectedClass);});$('.selectOptions span[data-value="'+currentValue+'"]',$selectMarkup).eq(0).click();options.after();}};$.fn[pluginName]=function(options){return this.each(function(){if(!$.data(this,"plugin_"+pluginName)){$.data(this,"plugin_"+pluginName,new Plugin(this,options));}});};})(jQuery,window,document);